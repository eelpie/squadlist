#parse('includes/head.vm')
#navTabs('Availability')

<div class="row-fluid">
			
	<div class="span12">
		<h3>$squad.name availability</h3>
		
		<form method="GET" action="/availability"/>
			<select name="squad">
			#foreach($availableSquad in $squads) 
				<option value="$availableSquad.id" #if($squad && $availableSquad.id == $squad.id) SELECTED #end>$availableSquad.name</option>
			#end
			</select>
			<input type="submit" value="Show availability" />
		</form>
		<hr/>			
				
		#if($members.isEmpty()) 
			<p>No members are currently assigned to this squad.</p>						
		#else
			
			#if($outings.isEmpty()) 
				<p>No matching outings</p>
			#else

			<div class="container-fluid">
				
								<table width="100%">
					<thead>
					<th></th>
					#foreach($outing in $outings) 
						<th>
							#parse('includes/outing-small.vm')
						</th>
					#end
				</thead>
				
				#foreach($member in $members)
					<tr>				
						<td>#parse('includes/member.vm')</td>				
						#foreach($outing in $outings)
							#set($key = "${outing.id}-$member.id")
							#set($status = '')					
							#set($status = $availability.get($key))
							<td align="middle">
								#if($status == '') 
									TBA
								#else
									<span class="label label-info">
										$status
									</span>
								#end
							</td>
						#end
					</tr>
				#end
			#end
			</div>
			
		#end
		<hr>

	</div>
</div>
</div>
